"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{74901:function(e,t){var a,i;(i=a||(a={})).EQUIPMENT_MISSING_AMMO="equipment_slot_ammo_missing",i.EQUIPMENT_WRONG_AMMO="equipment_slot_ammo_wrong",i.EQUIPMENT_SET_EFFECT_UNSUPPORTED="equipment_slot_body_unsupported_set_effect",i.WEAPON_WRONG_MONSTER="equipment_slot_weapon_wrong_monster",i.EQUIPMENT_SPEC_UNSUPPORTED="pvm_results_weapon_unsupported_spec",i.SPELL_WRONG_WEAPON="spell_wrong_weapon",i.SPELL_WRONG_MONSTER="spell_wrong_monster",i.MONSTER_UNIQUE_EFFECTS="monster_overall_unique_effects",i.RING_RECOIL_UNSUPPORTED="equipment_slot_ring_recoil",i.FEET_RECOIL_UNSUPPORTED="equipment_slot_feet_recoil",t.Z=a},17765:function(e,t,a){a.d(t,{Z:function(){return A}});var i,r,n=a(97431);(i=r||(r={})).WEAK="Weak",i.NORMAL="Normal",i.STRONG="Strong";var s=a(68581),l=a(74901),o=a(18009),c=a(52686),u=a(29928),h=a(35113),d=a(7237),m=a(45657),_=a(91977);let p={loadoutName:"unknown",detailedOutput:!1,disableMonsterScaling:!1,usingSpecialAttack:!1,noInit:!1,overrides:{}};class A{track(e,t,a){var i;return null===(i=this._details)||void 0===i||i.track(e,t,a),t}trackFactor(e,t,a){let i=Math.trunc(t*a[0]/a[1]),r=1!==a[0]?" * ".concat(a[0]):"",n=1!==a[1]?" / ".concat(a[1]):"";return this.track(e,i,"".concat(t).concat(r).concat(n," = ").concat(i)),i}trackMaxHitFromEffective(e,t,a){let i=Math.trunc((t*a+320)/640);return this.track(e,i,"(".concat(t," * ").concat(a," + 320) / 640 = ").concat(i)),i}trackAdd(e,t,a){let i=Math.trunc(t+a);return this.track(e,i,"".concat(t," ").concat(a>=0?"+".concat(a):"-".concat(-a)," = ").concat(i)),i}trackAddFactor(e,t,a){let i=Math.trunc(t*a[0]/a[1]),r=Math.trunc(t+i),n=1!==a[0]?" * ".concat(a[0]):"",s=1!==a[1]?" / ".concat(a[1]):"";return this.track(e,r,"".concat(t," + (").concat(t).concat(n).concat(s," = ").concat(i,") = ").concat(r)),r}get details(){var e;return(null===(e=this._details)||void 0===e?void 0:e.lines)||[]}canonicalizeEquipment(){this.player={...this.player,equipment:(0,s.Ff)(this.player.equipment)}}static getNormalAccuracyRoll(e,t){let a=(e,t)=>e>t?1-(t+2)/(2*(e+1)):e/(2*(t+1));return(e<0&&(e=Math.min(0,e+2)),t<0&&(t=Math.min(0,t+2)),e>=0&&t>=0)?a(e,t):e>=0&&t<0?1-1/(-t+1)/(e+1):e<0&&t>=0?0:e<0&&t<0?a(-t,-e):0}static getFangAccuracyRoll(e,t){if(e<0&&(e=Math.min(0,e+2)),t<0&&(t=Math.min(0,t+2)),e>=0&&t>=0){let a,i;return a=e,i=t,a>t?1-(i+2)*(2*i+3)/(a+1)/(a+1)/6:a*(4*a+5)/6/(a+1)/(i+1)}if(e>=0&&t<0)return 1-1/(-t+1)/(e+1);if(e<0&&t>=0)return 0;if(e<0&&t<0){let a,i;return a=-t,i=-e,a<t?a*(6*i-2*a+5)/6/(i+1)/(i+1):1-(i+2)*(2*i+3)/6/(i+1)/(a+1)}return 0}static getConflictionGauntletsAccuracyRoll(e,t){let a=this.getNormalAccuracyRoll(e,t),i=this.getFangAccuracyRoll(e,t);return i/(1+i-a)}wearing(e){return Array.isArray(e)?e.some(e=>this.allEquippedItems.includes(e)):this.allEquippedItems.includes(e)}wearingAll(e){return e.every(e=>this.allEquippedItems.includes(e))}isUsingMeleeStyle(){return["slash","crush","stab"].includes(this.player.style.type||"")}isWearingVoidRobes(){return this.wearing(["Void knight top","Void knight top (or)","Elite void top","Elite void top (or)"])&&this.wearing(["Void knight robe","Void knight robe (or)","Elite void robe","Elite void robe (or)"])&&this.wearing("Void knight gloves")}isWearingEliteVoidRobes(){return this.wearing(["Elite void top","Elite void top (or)"])&&this.wearing(["Elite void robe","Elite void robe (or)"])&&this.wearing("Void knight gloves")}isWearingMeleeVoid(){return this.isWearingVoidRobes()&&this.wearing(["Void melee helm","Void melee helm (or)"])}isWearingEliteRangedVoid(){return this.isWearingEliteVoidRobes()&&this.wearing(["Void ranger helm","Void ranger helm (or)"])}isWearingEliteMagicVoid(){return this.isWearingEliteVoidRobes()&&this.wearing(["Void mage helm","Void mage helm (or)"])}isWearingRangedVoid(){return this.isWearingVoidRobes()&&this.wearing(["Void ranger helm","Void ranger helm (or)"])}isWearingMagicVoid(){return this.isWearingVoidRobes()&&this.wearing(["Void mage helm","Void mage helm (or)"])}isWearingSlayerHelmet(){return this.wearing(["Slayer helmet","Slayer helmet (i)"])}isWearingBlackMask(){return this.isWearingImbuedBlackMask()||this.wearing(["Black mask","Slayer helmet"])}isWearingImbuedBlackMask(){return this.wearing(["Black mask (i)","Slayer helmet (i)"])}isWearingSmokeStaff(){return this.wearing(["Smoke battlestaff","Mystic smoke staff","Twinflame staff"])}isWearingTzhaarWeapon(){return this.wearing(["Tzhaar-ket-em","Tzhaar-ket-om","Tzhaar-ket-om (t)","Toktz-xil-ak","Toktz-xil-ek","Toktz-mej-tal"])}isWearingObsidian(){return this.wearingAll(["Obsidian helmet","Obsidian platelegs","Obsidian platebody"])}isWearingBerserkerNecklace(){return this.wearing(["Berserker necklace","Berserker necklace (or)"])}isWearingCrystalBow(){return this.wearing("Crystal bow")||this.allEquippedItems.some(e=>e.includes("Bow of faerdhinen"))}isWearingFang(){return this.wearing(["Osmumten's fang","Osmumten's fang (or)"])}isWearingAccursedSceptre(){return this.wearing(["Accursed sceptre","Accursed sceptre (a)"])}isWearingBlowpipe(){return this.wearing(["Toxic blowpipe","Blazing blowpipe"])}isWearingGodsword(){return this.wearing(["Ancient godsword","Armadyl godsword","Bandos godsword","Saradomin godsword","Zamorak godsword"])}isWearingScythe(){return this.wearing("Scythe of vitur")||this.allEquippedItems.some(e=>e.includes("of vitur"))}isWearingTwoHitWeapon(){return this.wearing(["Torag's hammers","Sulphur blades","Glacial temotli"])}isWearingKeris(){return this.allEquippedItems.some(e=>e.includes("Keris"))}isWearingDharok(){return this.wearingAll(["Dharok's helm","Dharok's platebody","Dharok's platelegs","Dharok's greataxe"])}isWearingVeracs(){return this.wearingAll(["Verac's helm","Verac's brassard","Verac's plateskirt","Verac's flail"])}isWearingKarils(){return this.wearingAll(["Karil's coif","Karil's leathertop","Karil's leatherskirt","Karil's crossbow","Amulet of the damned"])}isWearingAhrims(){return this.wearingAll(["Ahrim's staff","Ahrim's hood","Ahrim's robetop","Ahrim's robeskirt","Amulet of the damned"])}isWearingTorags(){return this.wearingAll(["Torag's helm","Torag's platebody","Torag's platelegs","Torag's hammers","Amulet of the damned"])}isWearingBloodMoonSet(){return this.wearingAll(["Dual macuahuitl","Blood moon helm","Blood moon chestplate","Blood moon tassets"])}isWearingSilverWeapon(){var e;return null!==(e=this.player.equipment.ammo)&&void 0!==e&&!!e.name.startsWith("Silver bolts")&&"ranged"===this.player.style.type||this.isUsingMeleeStyle()&&this.wearing(["Blessed axe","Ivandis flail","Blisterwood flail","Silver sickle","Silver sickle (b)","Emerald sickle","Emerald sickle (b)","Enchanted emerald sickle (b)","Ruby sickle (b)","Enchanted ruby sickle (b)","Blisterwood sickle","Silverlight","Darklight","Arclight","Rod of ivandis","Wolfbane"])}wearingVampyrebane(e){let t=e===o.p.VAMPYRE_2;return(t||this.isUsingMeleeStyle())&&this.wearing([...t?["Rod of ivandis"]:[],"Ivandis flail","Blisterwood sickle","Blisterwood flail"])}isWearingMsb(){return this.wearing(["Magic shortbow","Magic shortbow (i)"])}isWearingMlb(){return this.wearing(["Magic longbow","Magic comp bow"])}isWearingLeafBladedWeapon(){var e;return!!(this.isUsingMeleeStyle()&&this.wearing(["Leaf-bladed battleaxe","Leaf-bladed spear","Leaf-bladed sword"])||(null===(e=this.player.spell)||void 0===e?void 0:e.name)==="Magic Dart"||this.wearing(["Broad arrows","Broad bolts","Amethyst broad bolts"])&&"ranged"===this.player.style.type)}isWearingCorpbaneWeapon(){let{weapon:e}=this.player.equipment,t="stab"===this.player.style.type;return!!e&&(this.isWearingFang()||e.name.endsWith("halberd")||e.name.includes("spear")&&"Blue moon spear"!==e.name?t:"magic"===this.player.style.type)}isRevWeaponBuffApplicable(){var e;if(!this.player.buffs.inWilderness||(null===(e=this.player.equipment.weapon)||void 0===e?void 0:e.version)!=="Charged")return!1;switch(this.player.style.type){case"magic":return this.wearing(["Accursed sceptre","Accursed sceptre (a)","Thammaron's sceptre","Thammaron's sceptre (a)"]);case"ranged":return this.wearing(["Craw's bow","Webweaver bow"]);default:return this.wearing(["Ursine chainmace","Viggora's chainmace"])}}isWearingRatBoneWeapon(){return this.wearing(["Bone mace","Bone shortbow","Bone staff"])}isChargeSpellApplicable(){var e;if(!this.player.buffs.chargeSpell)return!1;switch(null===(e=this.player.spell)||void 0===e?void 0:e.name){case"Saradomin Strike":return this.wearing(["Saradomin cape","Imbued saradomin cape","Saradomin max cape","Imbued saradomin max cape"]);case"Claws of Guthix":return this.wearing(["Guthix cape","Imbued guthix cape","Guthix max cape","Imbued guthix max cape"]);case"Flames of Zamorak":return this.wearing(["Zamorak cape","Imbued zamorak cape","Zamorak max cape","Imbued zamorak max cape"]);default:return!1}}isWearingJusticiarArmour(){return this.wearingAll(["Justiciar faceguard","Justiciar chestguard","Justiciar legguards"])}isUsingDemonbane(){switch(this.player.style.type){case"magic":var e;return(null===(e=this.player.spell)||void 0===e?void 0:e.name.includes("Demonbane"))||!1;case"ranged":return this.wearing(["Scorching bow"]);default:return this.wearing(["Silverlight","Darklight","Arclight","Emberlight","Bone claws","Burning claws"])}}isUsingAbyssal(){return this.isUsingMeleeStyle()&&this.wearing(["Abyssal bludgeon","Abyssal dagger","Abyssal whip","Abyssal tentacle"])}tdUnshieldedBonusApplies(){if("Tormented Demon"!==this.monster.name||"Unshielded"!==this.monster.inputs.phase)return!1;switch(this.player.style.type){case"magic":return(0,d.$K)(this.player.spell);case"ranged":return"heavy"===(0,_.nj)(this.player.equipment.weapon.category);case"crush":return!0;default:return!1}}isAmmoInvalid(){var e,t;return(0,s.aQ)(null===(e=this.player.equipment.weapon)||void 0===e?void 0:e.id,null===(t=this.player.equipment.ammo)||void 0===t?void 0:t.id)===s.u3.INVALID}isImmuneToNormalBurns(){return this.monster.immunities.burn===r.NORMAL||this.isImmuneToStrongBurns()}isImmuneToStrongBurns(){return this.monster.immunities.burn===r.STRONG||c.Ix.includes(this.monster.id)}addIssue(e,t){this.userIssues.push({type:e,message:t,loadout:this.opts.loadoutName})}demonbaneVulnerability(){return -1===this.monster.id&&void 0!==this.monster.inputs.demonbaneVulnerability?this.monster.inputs.demonbaneVulnerability:"Duke Sucellus"===this.monster.name?70:c.ty.includes(this.monster.id)?120:c.Xf.includes(this.monster.id)?200:100}sanitizeInputs(){var e,t,a,i,r;let n=this.player.equipment;this.monster.attributes.includes(o.p.DEMON)&&(this.monster={...this.monster,inputs:{...this.monster.inputs,demonbaneVulnerability:this.demonbaneVulnerability()}}),(!this.monster.inputs.monsterCurrentHp||this.monster.inputs.monsterCurrentHp>this.monster.skills.hp)&&(this.monster={...this.monster,inputs:{...this.monster.inputs,monsterCurrentHp:this.monster.skills.hp}}),this.opts.usingSpecialAttack&&("Manual Cast"===this.player.style.stance&&(this.player={...this.player,style:(0,d.EK)((null===(i=n.weapon)||void 0===i?void 0:i.category)||m.F.UNARMED)[0],spell:null}),["Accursed sceptre (a)","Eldritch nightmare staff","Volatile nightmare staff"].includes((null===(a=n.weapon)||void 0===a?void 0:a.name)||"")&&(this.player={...this.player,style:(0,d.EK)(m.F.POWERED_STAFF)[0],spell:null})),c.P3.includes(this.player.style.stance)||(this.player={...this.player,spell:null}),"Manual Cast"!==this.player.style.stance&&this.isAmmoInvalid()&&((null===(r=n.ammo)||void 0===r?void 0:r.name)?this.addIssue(l.Z.EQUIPMENT_WRONG_AMMO,"This ammo does not work with your current weapon."):this.addIssue(l.Z.EQUIPMENT_MISSING_AMMO,"Your weapon requires ammo to use."));let s=null===(e=this.player.spell)||void 0===e?void 0:e.name;("Iban Blast"!==s||this.wearing(["Iban's staff","Iban's staff (u)"]))&&("Saradomin Strike"!==s||this.wearing(["Saradomin staff","Staff of light"]))&&("Claws of Guthix"!==s||this.wearing(["Guthix staff","Void knight mace","Staff of balance"]))&&("Flames of Zamarok"!==s||this.wearing(["Zamorak staff","Staff of the dead","Toxic staff of the dead","Thammaron's sceptre (a)","Accursed sceptre (a)"]))&&("Magic Dart"!==s||this.wearing(["Slayer's staff","Slayer's staff (e)","Staff of the dead","Toxic staff of the dead","Staff of light","Staff of balance"]))||(this.player={...this.player,spell:null},this.addIssue(l.Z.SPELL_WRONG_WEAPON,"This spell needs a specific weapon equipped to cast.")),((null==s?void 0:s.includes("Demonbane"))&&!this.monster.attributes.includes(o.p.DEMON)||"Crumble Undead"===s&&!this.monster.attributes.includes(o.p.UNDEAD))&&(this.player={...this.player,spell:null},this.addIssue(l.Z.SPELL_WRONG_MONSTER,"This spell cannot be cast on the selected monster.")),(this.wearing("Dawnbringer")&&("Verzik Vitur"!==this.monster.name||!(null===(t=this.monster.version)||void 0===t?void 0:t.includes("Phase 1")))||this.wearing("Holy water")&&!this.monster.attributes.includes(o.p.DEMON))&&this.addIssue(l.Z.WEAPON_WRONG_MONSTER,"This weapon cannot be used against the select monster."),(this.wearingAll(["Blue moon helm","Blue moon chestplate","Blue moon tassets","Blue moon spear"])||this.wearingAll(["Eclipse moon helm","Eclipse moon chestplate","Eclipse moon tassets","Eclipse atlatl"]))&&this.addIssue(l.Z.EQUIPMENT_SET_EFFECT_UNSUPPORTED,"The calculator currently does not account for your equipment set effect."),(this.wearing("Ring of recoil")||this.wearing("Ring of suffering (i)")||this.wearing("Ring of suffering"))&&this.addIssue(l.Z.RING_RECOIL_UNSUPPORTED,"The calculator does not account for recoil damage."),this.wearing("Echo boots")&&this.addIssue(l.Z.FEET_RECOIL_UNSUPPORTED,"The calculator does not account for recoil damage.")}constructor(e,t,a={}){(0,n._)(this,"opts",void 0),(0,n._)(this,"_details",void 0),(0,n._)(this,"player",void 0),(0,n._)(this,"monster",void 0),(0,n._)(this,"baseMonster",void 0),(0,n._)(this,"allEquippedItems",[]),(0,n._)(this,"userIssues",[]),this.opts={...p,...a},this.opts.detailedOutput&&(this._details=new u.b),this.player=e,this.baseMonster=t,this.monster=this.opts.disableMonsterScaling||this.opts.noInit?t:(0,h.B)(t),this.opts.noInit||(this.canonicalizeEquipment(),this.allEquippedItems=Object.values(this.player.equipment).filter(e=>null!==e).flat(1).map(e=>(null==e?void 0:e.name)||""),this.sanitizeInputs())}}},29928:function(e,t,a){a.d(t,{L:function(){return r},b:function(){return l}});var i,r,n=a(97431);(i=r||(r={})).NPC_DEFENCE_ROLL_LEVEL="NPC defence level",i.NPC_DEFENCE_ROLL_EFFECTIVE_LEVEL="NPC defence effective level",i.NPC_DEFENCE_STAT_BONUS="NPC defence stat bonus",i.NPC_DEFENCE_ROLL_BASE="NPC defence base roll",i.NPC_DEFENCE_ROLL_TOA="NPC defence ToA roll",i.NPC_DEFENCE_BRIMSTONE="NPC defence brimstone ring",i.NPC_DEFENCE_ROLL_FINAL="NPC defence roll",i.PLAYER_ACCURACY_LEVEL="Player accuracy level",i.PLAYER_ACCURACY_LEVEL_PRAYER="Player accuracy level prayer",i.PLAYER_ACCURACY_EFFECTIVE_LEVEL="Player accuracy effective level",i.PLAYER_ACCURACY_EFFECTIVE_LEVEL_VOID="Player accuracy void effective level",i.PLAYER_ACCURACY_GEAR_BONUS="Player accuracy gear bonus",i.PLAYER_ACCURACY_ROLL_BASE="Player accuracy base roll",i.PLAYER_ACCURACY_ROLL_MAGIC_PERCENT="Player accuracy magic %",i.PLAYER_ACCURACY_OBSIDIAN_BONUS="Player accuracy obsidian bonus",i.PLAYER_ACCURACY_OBSIDIAN="Player accuracy obsidian",i.PLAYER_ACCURACY_FORINTHRY_SURGE="Player accuracy forinthry surge",i.PLAYER_ACCURACY_SALVE="Player accuracy salve amulet",i.PLAYER_ACCURACY_BLACK_MASK="Player accuracy black mask",i.PLAYER_ACCURACY_REV_WEAPON="Player accuracy revenant weapon",i.PLAYER_DEMONBANE_FACTOR="Demonbane factor",i.PLAYER_ACCURACY_DEMONBANE="Player accuracy demonbane",i.PLAYER_ACCURACY_DRAGONHUNTER="Player accuracy dragonhunter",i.PLAYER_ACCURACY_CHINCHOMPA="Player accuracy chinchompa distance",i.PLAYER_ACCURACY_KERIS="Player accuracy keris",i.PLAYER_ACCURACY_VAMPYREBANE="Player accuracy vampyrebane",i.PLAYER_ACCURACY_EFARITAY="Player accuracy efaritay's aid",i.PLAYER_ACCURACY_SMOKE_BATTLESTAFF="Player accuracy smoke battlestaff",i.PLAYER_ACCURACY_TOME="Player accuracy tome",i.PLAYER_ACCURACY_TITANS_RANGED="Player accuracy Royal Titans ranged",i.PLAYER_ACCURACY_SPELLEMENT_BONUS="Player accuracy spellement weakness bonus",i.PLAYER_ACCURACY_SPELLEMENT="Player accuracy spellement weakness",i.PLAYER_ACCURACY_INQ="Player accuracy inquisitor's",i.PLAYER_ACCURACY_BRIMSTONE="Player accuracy brimstone ring",i.PLAYER_ACCURACY_SPEC="Player accuracy spec",i.PLAYER_ACCURACY_ROLL_FINAL="Player accuracy roll",i.DAMAGE_LEVEL="Damage level",i.DAMAGE_LEVEL_PRAYER="Damage level prayer",i.DAMAGE_LEVEL_SOULREAPER_BONUS="Damage level soulreaper axe bonus",i.DAMAGE_LEVEL_SOULREAPER="Damage level soulreaper axe",i.DAMAGE_EFFECTIVE_LEVEL="Damage effective level",i.DAMAGE_EFFECTIVE_LEVEL_HOLY_WATER="Damage effective level holy water",i.DAMAGE_EFFECTIVE_LEVEL_VOID="Damage void effective level",i.DAMAGE_GEAR_BONUS="Damage gear bonus",i.MAX_HIT_BASE="Base max hit",i.MAX_HIT_FORINTHRY_SURGE="Max hit forinthry surge",i.MAX_HIT_SALVE="Max hit salve amulet",i.MAX_HIT_BLACK_MASK="Max hit black mask",i.MAX_HIT_DEMONBANE="Max hit demonbane",i.MAX_HIT_OBSIDIAN_BONUS="Max hit obsidian bonus",i.MAX_HIT_OBSIDIAN="Max hit obsidian",i.MAX_HIT_BERSERKER="Max hit berserker necklace",i.MAX_HIT_DRAGONHUNTER="Max hit dragonhunter",i.MAX_HIT_KERIS="Max hit keris",i.MAX_HIT_GOLEMBANE="Max hit golembane",i.MAX_HIT_REV_WEAPON="Max hit revenant weapon",i.MAX_HIT_VAMPYREBANE="Max hit vampyrebane",i.MAX_HIT_EFARITAY="Max hit efaritay's aid",i.MAX_HIT_LEAFY="Max hit leafy",i.MAX_HIT_COLOSSALBLADE="Max hit colossal blade",i.MAX_HIT_INQ="Max hit inquisitor's",i.MAX_HIT_RATBANE="Max hit ratbane",i.MAX_HIT_TOME="Max hit tome",i.MAX_HIT_FANG="Max hit fang",i.MAX_HIT_TONALZTICS="Max hit tonalztics",i.MAX_HIT_GODSWORD_SPEC="Max hit godsword spec",i.MAX_HIT_SPEC="Max hit spec",i.MAX_HIT_MAGIC_DMG="Max hit magic damage bonus",i.MAX_HIT_NEZIKCHENED="Max hit Nezikchened",i.MAX_HIT_WARDENS="Max hit wardens",i.MAX_HIT_FINAL="Max hit",i.MIN_HIT_SUNFIRE="Min hit sunfire runes",i.MIN_HIT_FANG="Min hit fang",i.MIN_HIT_SPEC="Min hit spec",i.MIN_HIT_WARDENS="Min hit wardens",i.MIN_HIT_FINAL="Min hit",i.PLAYER_ACCURACY_DAWNBRINGER="Player accuracy override dawnbringer",i.PLAYER_ACCURACY_SCURRIUS_RAT="Player accuracy override giant rat",i.PLAYER_ACCURACY_TD="Player accuracy override tormented demon",i.PLAYER_ACCURACY_BASE="Player accuracy base",i.PLAYER_ACCURACY_FANG_TOA="Player accuracy fang toa",i.PLAYER_ACCURACY_FANG="Player accuracy fang",i.PLAYER_ACCURACY_CONFLICTION_GAUNTLETS="Player accuracy confliction gauntlets",i.PLAYER_ACCURACY_ROYAL_TITAN_ELEMENTAL="Player accuracy override titan elemental",i.PLAYER_ACCURACY_FINAL="Player accuracy",i.HIT_DIST_FINAL_MIN="Hit dist min",i.HIT_DIST_FINAL_MAX="Hit dist max",i.HIT_DIST_FINAL_EXPECTED="Hit dist expected",i.DOT_EXPECTED="Damage over time expected",i.DOT_MAX="Damage over time max",i.GUARDIANS_DMG_BONUS="Guardians hit multiplier",i.PLAYER_DEFENCE_ROLL_LEVEL="Player defence level",i.PLAYER_DEFENCE_ROLL_LEVEL_PRAYER="Player defence level prayer",i.PLAYER_DEFENCE_ROLL_LEVEL_TORAGS="Player defence level torags",i.PLAYER_DEFENCE_ROLL_MAGIC_LEVEL="Player defence magic level",i.PLAYER_DEFENCE_ROLL_MAGIC_LEVEL_PRAYER="Player defence magic level prayer",i.PLAYER_DEFENCE_ROLL_EFFECTIVE_LEVEL="Player defence effective level",i.PLAYER_DEFENCE_ROLL_GEAR_BONUS="Player defence gear bonus",i.PLAYER_DEFENCE_ROLL_FINAL="Player defence roll",i.WARDENS_ACCURACY_DELTA="Wardens accuracy delta",i.WARDENS_DMG_MODIFIER="Wardens damage modifier",i.NPC_ACCURACY_ROLL_BASE="NPC accuracy base roll",i.NPC_ACCURACY_ROLL_BONUS="NPC accuracy bonus",i.NPC_ACCURACY_ROLL_FINAL="NPC accuracy roll",i.REPIRATORY_SYSTEM_MIN_HIT="Respiratory system minimum hit";let s=["Player defence roll","NPC defence roll","Player accuracy roll","Max hit","Player accuracy","NPC accuracy roll","Hit dist min","Hit dist max","Hit dist expected"];class l{track(e,t,a){let i;void 0===this.entries.get(e)&&(i=a||("number"==typeof t?Number.isInteger(t)?t.toString():t.toFixed(4):"string"==typeof t?t:"".concat(t[0]," / ").concat(t[1])),this.dirty=!0,this.entries.set(e,{label:e,value:t,displayValue:i,highlight:s.includes(e)}))}get lines(){return this.dirty&&(this._lines=[...this.entries.values()],this.dirty=!1),this._lines}constructor(){(0,n._)(this,"entries",new Map),(0,n._)(this,"_lines",[]),(0,n._)(this,"dirty",!0)}}},37228:function(e,t,a){a.d(t,{L_:function(){return u},Pr:function(){return g},SE:function(){return _},ZE:function(){return m},dA:function(){return d},lh:function(){return p},mq:function(){return E},q5:function(){return h},st:function(){return A},w2:function(){return f}});var i=a(97431),r=a(4870),n=a(27534),s=a(85958),l=a(23284),o=a(50641);let c={transformInaccurate:!0};class u{transform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return this.accurate||t.transformInaccurate?e(this):new d([new h(1,[this])])}constructor(e,t=!0){(0,i._)(this,"damage",void 0),(0,i._)(this,"accurate",void 0),this.damage=e,this.accurate=t}}(0,i._)(u,"INACCURATE",new u(0,!1));class h{scale(e){return new h(this.probability*e,[...this.hitsplats])}zip(e){return new h(this.probability*e.probability,[...this.hitsplats,...e.hitsplats])}shift(){return[new h(this.probability,[this.hitsplats[0]]),new h(1,this.hitsplats.slice(1))]}transform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if(1===this.hitsplats.length)return this.hitsplats[0].transform(e,t).scaleProbability(this.probability);let[a,i]=this.shift();return a.transform(e,t).zip(i.transform(e,t))}anyAccurate(){return(0,r.Z)(this.hitsplats,e=>e.accurate)}getSum(){return void 0===this._sum&&(this._sum=(0,n.Z)(this.hitsplats,e=>e.damage)),this._sum}getExpectedValue(){return this.probability*this.getSum()}getHash(){let e=0;for(let t of this.hitsplats)e<<=8,e|=t.damage,e<<=1,e|=t.accurate?1:0;return e}toString(){return"WeightedHit(p: ".concat(this.probability,", h: [").concat(this.hitsplats.map(e=>e.damage).join(","),"], s: ").concat(this.getSum(),")")}constructor(e,t){(0,i._)(this,"probability",void 0),(0,i._)(this,"hitsplats",void 0),(0,i._)(this,"_sum",void 0),this.probability=e,this.hitsplats=t}}class d{addHit(e){this.hits.push(e)}zip(e){return new d((0,s.Z)(this.hits,e.hits).map(e=>e[0].zip(e[1])))}transform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,a=new d([]);for(let i of this.hits)for(let r of i.transform(e,t).hits)a.addHit(r);return a.flatten()}scaleProbability(e){return new d(this.hits.map(t=>t.scale(e)))}scaleDamage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new d(this.hits.map(a=>new h(a.probability,a.hitsplats.map(a=>new u(Math.trunc(a.damage*e/t),a.accurate)))))}flatten(){let e=new Map,t=new Map;for(let a of this.hits){let i=a.getHash(),r=e.get(i);void 0===r?(e.set(i,a.probability),t.set(i,a.hitsplats)):e.set(i,r+a.probability)}let a=new d([]);for(let[i,r]of e.entries())r>0&&a.addHit(new h(r,t.get(i)));return a}cumulative(){let e=new d([]),t=new Map;for(let e of this.hits){let a=e.anyAccurate()?e.getSum():~e.getSum(),i=t.get(a);void 0===i?t.set(a,e.probability):t.set(a,i+e.probability)}for(let[a,i]of t.entries()){let t=a>=0,r=t?a:~a;i>0&&e.addHit(new h(i,[new u(r,t)]))}return e}expectedHit(){return(0,n.Z)(this.hits.map(e=>e.getExpectedValue()))}size(){return this.hits.length}getMin(){return(0,l.Z)(this.hits.map(e=>e.getSum()))}getMax(){return(0,o.Z)(this.hits.map(e=>e.getSum()))}withProbabilisticDelays(e){let t=[];this.hits.forEach(a=>{e(a).forEach(e=>{let[i,r]=e;return t.push([new h(a.probability*i,[new u(a.getSum(),a.anyAccurate())]),r])})});let a=[],i=new Map;for(let[e,a]of t){let t=16777215&e.getSum()|a<<24,r=i.get(t);void 0===r?i.set(t,e.probability):i.set(t,r+e.probability)}for(let[e,t]of i.entries()){let i=(2399141888&e)>>24,r=16777215&e;a.push([new h(t,[new u(r,!0)]),i])}return a}static linear(e,t,a){let i=new d([]),r=e/(a-t+1);for(let e=t;e<=a;e++)i.addHit(new h(r,[new u(e)]));return i.addHit(new h(1-e,[u.INACCURATE])),i}static single(e,t){let a=new d([new h(e,t)]);return 1!==e&&a.addHit(new h(1-e,[u.INACCURATE])),a}constructor(e){(0,i._)(this,"hits",void 0),this.hits=e}}class m{get zipped(){return this._zipped||(this._zipped=this.dists.reduce((e,t)=>e.zip(t))),this._zipped}get singleHitsplat(){return this._singleHitsplat||(this._singleHitsplat=this.zipped.cumulative()),this._singleHitsplat}addDist(e){this.dists.push(e)}transform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return this.map(a=>a.transform(e,t))}flatten(){return this.map(e=>e.flatten())}scaleProbability(e){return this.map(t=>t.scaleProbability(e))}scaleDamage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.map(a=>a.scaleDamage(e,t))}getMin(){return(0,n.Z)(this.dists.map(e=>e.getMin()))||0}getMax(){return(0,n.Z)(this.dists.map(e=>e.getMax()))||0}getExpectedDamage(){return(0,n.Z)(this.dists.map(e=>e.expectedHit()))||0}asHistogram(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.singleHitsplat,a=new Map;t.hits.forEach(t=>{(!e||t.anyAccurate())&&a.set(t.getSum(),(a.get(t.getSum())||0)+t.probability)});let i=[];for(let e=0;e<=t.getMax();e++){let t=a.get(e);void 0===t?i.push({name:e.toString(),value:0}):i.push({name:e.toString(),value:t})}return i}map(e){return new m(this.dists.map(e))}constructor(e){(0,i._)(this,"dists",void 0),(0,i._)(this,"_zipped",void 0),(0,i._)(this,"_singleHitsplat",void 0),this.dists=e}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a=>new d([new h(1,[new u(Math.max(t,Math.min(a.damage,e)),a.accurate)])])}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a=>{let i=new d([]),r=1/(e+1);for(let n=0;n<=e;n++)i.addHit(new h(r,[new u(Math.min(a.damage,n+t),a.accurate)]));return i.flatten()}}function A(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{if(i.damage<=e)return new d([new h(1,[i])]);let r=new d([]),n=1/(t+1);for(let s=0;s<=t;s++)r.addHit(new h(n,[new u(i.damage>e?s+a:i.damage,i.accurate)]));return r.flatten()}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{let r=Math.trunc(e*i.damage/t);return 0!==a&&(r=i.damage>=a?Math.max(a,r):Math.max(i.damage,r)),new d([new h(1,[new u(r,i.accurate)])])}}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return E(1,e,t)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a=>new d([new h(1,[new u(Math.max(t,a.damage+e),a.accurate)])])}},87838:function(e,t,a){a.d(t,{T5:function(){return r},dL:function(){return s},r_:function(){return n},t7:function(){return i}});let i=(e,t,a,i,r)=>Math.trunc((e-t)*(r-i)/(a-t)+i),r=e=>Math.trunc(Math.sqrt(e)),n=(e,t,a,i,r)=>e+Math.trunc((t-e)*(r-a)/(i-a)),s=(e,t)=>e+Math.trunc(e*t/100)},9112:function(e,t,a){a.d(t,{Kk:function(){return u},_w:function(){return d},gi:function(){return o},jQ:function(){return m},sd:function(){return h},yR:function(){return c}});var i=a(37228),r=a(18009),n=a(4870);let s=e=>{let{kandarinDiary:t}=e;return t?1.1:1},l=(e,t,a,r)=>{let{zcb:n,spec:s}=e;return e=>e.accurate&&n&&s?i.dA.single(1,[new i.L_(e.damage+a)]):new i.dA(!e.accurate&&r?[new i.q5(1,[e])]:[new i.q5(t,[new i.L_(e.damage+a,e.accurate)]),new i.q5(1-t,[new i.L_(e.damage,e.accurate)])])},o=e=>{let{rangedLvl:t,zcb:a}=e,i=.05*s(e);return l(e,i,Math.trunc(t/(a?9:10)),!1)},c=e=>{let{rangedLvl:t,zcb:a,monster:i}=e,n=.06*s(e),o=i.attributes.includes(r.p.FIERY)?15:20;return l(e,n,Math.trunc(t/(a?o-2:o)),!1)},u=e=>{let{maxHit:t,zcb:a,spec:r}=e,n=.1*s(e),l=i.dA.linear(1,0,Math.trunc(t*(a?126:115)/100));return e=>e.accurate&&a&&r?l:new i.dA([...l.scaleProbability(n).hits,new i.q5(1-n,[new i.L_(e.damage,e.accurate)])])},h=e=>{let{rangedLvl:t,zcb:a,monster:o}=e;if((0,n.Z)(o.attributes,e=>e===r.p.FIERY||e===r.p.DRAGON))return e=>new i.dA([new i.q5(1,[e])]);let c=.06*s(e);return l(e,c,Math.trunc(2*t/(a?9:10)),!0)},d=e=>{let{maxHit:t,zcb:a,spec:n,monster:l}=e;if(l.attributes.includes(r.p.UNDEAD))return e=>new i.dA([new i.q5(1,[e])]);let o=.11*s(e),c=i.dA.linear(1,0,Math.trunc(t*(a?132:120)/100));return e=>e.accurate?a&&n?c:new i.dA([...c.scaleProbability(o).hits,new i.q5(1-o,[new i.L_(e.damage,e.accurate)])]):new i.dA([new i.q5(1,[e])])},m=e=>{let{zcb:t,spec:a,monster:r}=e,n=.06*s(e),l=Math.trunc(r.inputs.monsterCurrentHp*(t?22:20)/100),o=i.dA.single(1,[new i.L_(Math.min(t?110:100,l))]);return e=>e.accurate&&t&&a?o:new i.dA([...o.scaleProbability(n).hits,new i.q5(1-n,[new i.L_(e.damage,e.accurate)])])}},88248:function(e,t,a){a.d(t,{_B:function(){return u},b8:function(){return l},kp:function(){return s}});var i=a(37228),r=a(27534);let n=(e,t,a,i,r)=>{let n=Math.trunc(i*(t-e)/4),s=i+n+r;return[(1-a)**e*a/(s-n+1),n,s]},s=(e,t)=>{let a=new i.dA([]);for(let r=0;r<4;r++){let[s,l,o]=n(r,4,e,t,-1);for(let e=l;e<=o;e++)switch(r){case 0:a.addHit(new i.q5(s,[new i.L_(Math.trunc(e/2)),new i.L_(Math.trunc(e/4)),new i.L_(Math.trunc(e/8)),new i.L_(Math.trunc(e/8)+1)]));break;case 1:a.addHit(new i.q5(s,[new i.L_(Math.trunc(e/2)),new i.L_(Math.trunc(e/4)),new i.L_(Math.trunc(e/4)+1),i.L_.INACCURATE]));break;case 2:a.addHit(new i.q5(s,[new i.L_(Math.trunc(e/2)),new i.L_(Math.trunc(e/2)+1),i.L_.INACCURATE,i.L_.INACCURATE]));break;default:a.addHit(new i.q5(s,[new i.L_(e+1),i.L_.INACCURATE,i.L_.INACCURATE,i.L_.INACCURATE]))}}let r=(1-e)**4;return a.addHit(new i.q5(2*r/3,[new i.L_(1,!1),new i.L_(1,!1),i.L_.INACCURATE,i.L_.INACCURATE])),a.addHit(new i.q5(r/3,[i.L_.INACCURATE,i.L_.INACCURATE,i.L_.INACCURATE,i.L_.INACCURATE])),new i.ZE([a])},l=(e,t)=>{let a=new i.dA([]);for(let r=0;r<3;r++){let[s,l,o]=n(r,3,e,t,0);for(let e=l;e<=o;e++)switch(r){case 0:a.addHit(new i.q5(s,[new i.L_(Math.trunc(e/2)),new i.L_(Math.trunc(e/4)),new i.L_(Math.trunc(e/4))]));break;case 1:a.addHit(new i.q5(s,[new i.L_(Math.trunc(e/2)-1),new i.L_(Math.trunc(e/2)-1),new i.L_(2)]));break;default:a.addHit(new i.q5(s,[new i.L_(e-2),new i.L_(1),new i.L_(1)]))}}let r=(1-e)**3;return a.addHit(new i.q5(r/5,[i.L_.INACCURATE,i.L_.INACCURATE,i.L_.INACCURATE])),a.addHit(new i.q5(2*r/5,[new i.L_(1,!1),i.L_.INACCURATE,i.L_.INACCURATE])),a.addHit(new i.q5(2*r/5,[new i.L_(1,!1),new i.L_(1,!1),i.L_.INACCURATE])),new i.ZE([a])},o=[[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]],c=[0,1,2].map(e=>(0,r.Z)(o,t=>{let a=.15*(e+1),i=1===t[0]?a:1-a,n=1===t[1]?a:1-a,s=1===t[2]?a:1-a,l=(0,r.Z)(t,e=>10*e);return 1===t[0]&&1===t[1]&&(l-=1),i*n*s*l})),u=e=>{let t=0;for(let a=0;a<3;a++)t+=(1-e)**a*e*c[a];return t}},65600:function(e,t,a){var i=a(18009),r=a(52686),n=a(87838),s=a(50641);let l=e=>{var t,a;let i=r.XS.includes(e.id),n=["atk","str","ranged"],l=["def"];i?l.push("magic"):n.push("magic");let o=n.filter(t=>1!==e.skills[t]),c=l.filter(t=>1!==e.skills[t]),u=null!==(t=(0,s.Z)(o,t=>e.skills[t]))&&void 0!==t?t:1,h=null!==(a=(0,s.Z)(c,t=>e.skills[t]))&&void 0!==a?a:1;return{offensives:o,baseOffensive:u,defensives:c,baseDefensive:h,baseHp:r.TT.includes(e.id)?151+Math.trunc(e.inputs.partySumMiningLevel/e.inputs.partySize):e.skills.hp}},o=e=>{let{inputs:t,skills:a}=e,{offensives:i,baseOffensive:r,defensives:s,baseDefensive:o,baseHp:c}=l(e),u=Math.max(Math.min(t.partyMaxCombatLevel,126),60),h=Math.max(Math.min(t.partyMaxHpLevel,99),55);t.isFromCoxCm&&(h=(0,n.dL)(h,50),u=(0,n.dL)(u,50));let d={};for(let e of(d.hp=Math.max(Math.trunc(c*u/126),5),i))d[e]=Math.max(Math.trunc(r*h/99),1);for(let e of s)d[e]=Math.max(Math.trunc(o*h/99),1);return{...e,skills:{...a,...d}}},c=e=>{let{inputs:t,skills:a,id:i}=e,{offensives:s,baseOffensive:o,defensives:c,baseDefensive:u,baseHp:h}=l(e),d=Math.min(Math.max(t.partySize,1),100),m=d-1,_=Math.max(Math.min(t.partyMaxCombatLevel,126),60),p=Math.max(Math.min(55+Math.trunc(44*t.partyMaxHpLevel/99),99),55),A=Math.trunc(o*p/99),E=Math.trunc(u*p/99),g=Math.trunc(h*_/126);A=Math.trunc(A*(100+7*(0,n.T5)(m)+m)/100),E=Math.trunc(E*(100+(0,n.T5)(m)+Math.trunc(7*m/10))/100),g+=g*Math.trunc(50*d/100),t.isFromCoxCm&&(A=(0,n.dL)(A,50),r.oU.includes(i)||(g=(0,n.dL)(g,50)),r.oU.includes(i)||(E=r.L8.includes(i)?d<4?(0,n.dL)(E,20):(0,n.dL)(E,35):(0,n.dL)(E,50)));let f={};for(let e of(f.hp=Math.max(Math.min(g,3e4),50),s))f[e]=Math.max(Math.min(A,5e3),50);for(let e of c)f[e]=Math.max(Math.min(E,2e4),50);return{...e,skills:{...a,...f}}},u=e=>{let t=r.Zs.includes(e.id),a=r.g4.includes(e.id),i=Math.min(e.inputs.partySize-1,50)-3*Math.trunc(Math.min(e.inputs.partySize,50)/8),n=c(e),s=a?Math.trunc(n.skills.magic/2):n.skills.magic;return{...n,skills:{...n.skills,hp:t||a?600+300*i:800+400*i,magic:s}}};t.Z=e=>e.attributes.includes(i.p.XERICIAN)?r.VE.includes(e.id)?o(e):r.A0.includes(e.id)?u(e):c(e):e},88450:function(e,t,a){var i=a(52686);t.Z=e=>{if(!e.inputs.phase)return e;if(i.E1.includes(e.id)&&"Enraged"===e.inputs.phase)return{...e,skills:{...e.skills,def:e.skills.def+35}};if(i.ty.includes(e.id)&&"Enraged"!==e.version){let t="Tank using magic"===e.inputs.phase?60:-30;return{...e,defensive:{...e.defensive,magic:t}}}return e}},14473:function(e,t,a){var i=a(52686);let r={1:[10,40],2:[19,40],3:[27,40],4:[34,40],5:[40,40]};t.Z=e=>{let{inputs:t}=e;if(i.aC.includes(e.id)){let a=Math.min(5,Math.max(3,t.partySize));return{...e,skills:{...e.skills,hp:Math.trunc(e.skills.hp*(a+3)/8)}}}if(i.s3.includes(e.id)){let a=r[Math.min(5,Math.max(1,t.partySize))];return{...e,skills:{...e.skills,hp:Math.trunc(e.skills.hp*a[0]/a[1])}}}return e}},94376:function(e,t,a){var i=a(52686);t.Z=e=>{let{inputs:t}=e;if(!i.Dr.includes(e.id))return e;let a=e.skills.hp;i.pF.includes(e.id)&&(a=4500);let r=Math.trunc((i.pF.includes(e.id)?1:4)*t.toaInvocationLevel/10);a+=Math.trunc(a*r/100);let n=Math.min(6,Math.max(0,t.toaPathLevel));i.vn.includes(e.id)&&n>=1&&(a=Math.trunc(a*(100+(3+5*t.toaPathLevel))/100));let s=Math.min(8,Math.max(1,t.partySize));if(s>=2){let e=9*(s>=3?2:1);s>=4&&(e+=6*(s-3)),a=Math.trunc(a*(10+e)/10)}if(a>100){let e=a>300?10:5;a=Math.trunc((a+Math.trunc(e/2))/e)*e}return{...e,skills:{...e.skills,hp:a}}}},67118:function(e,t,a){var i=a(87838);let r=e=>{switch(e.version){case"Quest":return{maxHp:500,str:[210,280],def:[180,130]};case"Awakened":return{maxHp:1400,str:[391,522],def:[268,181]};default:return{maxHp:700,str:[270,360],def:[215,145]}}};t.Z=e=>{let{inputs:t}=e;if("Vardorvis"!==e.name)return e;let a=r(e),n=Number.isFinite(t.monsterCurrentHp)?t.monsterCurrentHp:a.maxHp;return{...e,skills:{...e.skills,str:(0,i.t7)(n,a.maxHp,0,a.str[0],a.str[1]),def:(0,i.t7)(n,a.maxHp,0,a.def[0],a.def[1])}}}}}]);